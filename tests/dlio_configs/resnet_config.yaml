# DLIO ResNet Workload Configuration
# Based on MLCommons DLIO ResNet50 benchmark specification

model:
  name: resnet50_workload
  model_size: 25583592

framework: pytorch

workflow:
  generate_data: false
  train: true
  checkpoint: true
  evaluation: true

dataset:
  data_folder: az://mlcommons/resnet/imagenet
  format: npz
  num_files_train: 5000
  num_files_eval: 500
  record_length_bytes: 151875
  num_samples_per_file: 256

reader:
  data_loader: pytorch
  batch_size: 64
  prefetch: 32
  shuffle: true
  read_threads: 16
  compute_threads: 8
  transfer_size: 8388608
  file_access_type: direct_io

checkpointing:
  checkpoint_folder: az://mlcommons/resnet/checkpoints
  checkpoint_after_epoch: 10
  epochs_between_checkpoints: 10

profiling:
  profiler: pytorch_profiler  
  profile_folder: /mnt/vast1/resnet_profiles
  iostat: false