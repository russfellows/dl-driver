# DLIO Configuration with TensorFlow Framework Profile
# Demonstrates M4 framework integration capabilities

model:
  name: "tensorflow_bert"
  framework: "tensorflow"
  
framework: "tensorflow"

workflow:
  generate_data: false
  train: true
  checkpoint: false
  evaluation: false

dataset:
  data_folder: "s3://ml-datasets/bert_training"
  format: "tfrecord"
  num_files_train: 2048
  num_samples_per_file: 128
  record_length_bytes: 1048576  # 1MB samples
  compression: "gzip"

reader:
  data_loader: "tensorflow"
  batch_size: 64
  prefetch: 16
  shuffle: true
  read_threads: 8
  seed: 123

# TensorFlow-specific configuration (M4 framework profile)
tensorflow_config:
  batch_size: 64
  shuffle_buffer_size: 1000
  seed: 123
  num_parallel_calls: -1  # tf.data.AUTOTUNE
  prefetch_buffer_size: -1  # tf.data.AUTOTUNE
  deterministic: true
  drop_remainder: false
  reshuffle_each_iteration: true
  writable: false

# Alternative nested framework configuration
framework_profiles:
  tensorflow:
    batch_size: 64
    shuffle_buffer_size: 1000
    deterministic: true