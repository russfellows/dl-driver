# DLIO Configuration for Framework Integration Testing - NPZ Format
# Generates small NPZ dataset for testing PyTorch/TensorFlow/JAX integrations
# Uses /mnt/vast1 for high-capacity storage as per project guidelines

model:
  name: "FrameworkTest"
  framework: "pytorch"  # Will test all frameworks

dataset:
  data_folder: "file:///mnt/vast1/dl_driver_framework_test/npz_small"
  format: "npz"
  num_files_train: 20
  num_samples_per_file: 8
  record_length: 12288  # 64x64x3 float32 = 12,288 bytes
  file_shuffle: "seed"
  sample_shuffle: "seed"

reader:
  data_loader: "pytorch"
  batch_size: 4
  read_threads: 2
  computation_threads: 1
  sample_shuffle: true
  file_shuffle: "seed"
  transfer_size: 1048576  # 1MB
  prefetch_size: 4

checkpoint:
  checkpoint_folder: "file:///mnt/vast1/dl_driver_framework_test/npz_small/checkpoints"
  epochs_between_checkpoints: 1

workload:
  workflow:
    generate_data: true
    train: true
    checkpoint: false
  train:
    epochs: 2
    computation_time: 0.01  # 10ms per batch
    
# Framework-specific configurations for testing
framework_profiles:
  pytorch:
    num_workers: 2
    pin_memory: false
    persistent_workers: false
    prefetch_factor: 2
    drop_last: false
  
  tensorflow:
    buffer_size: 1024
    num_parallel_calls: 2
    deterministic: true
    experimental_optimization: false
  
  jax:
    batch_size: 4
    shuffle_buffer_size: 100
    prefetch: 2